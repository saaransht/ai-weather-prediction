(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9660:function(e,t,s){Promise.resolve().then(s.bind(s,3722))},3722:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return M}});var a=s(7437),r=s(2265),l=s(6264),n=s(6142),i=s(1827);function o(e){let{onLocationSelect:t,enableGPS:s=!0,className:o=""}=e,[c,d]=(0,r.useState)(""),[m,x]=(0,r.useState)([]),[u,h]=(0,r.useState)(!1),[p,g]=(0,r.useState)(!1),[b,j]=(0,r.useState)(!1),[f,y]=(0,r.useState)([]);(0,r.useEffect)(()=>{v()},[]);let v=async()=>{try{let e=await fetch("/api/weather/locations/popular-indian-cities?limit=10");if(e.ok){let t=await e.json();y(t.cities||[])}}catch(e){console.error("Failed to fetch popular cities:",e)}},N=async e=>{if(e.length<2){x([]);return}h(!0);try{let t=await fetch("/api/weather/locations/search?q=".concat(encodeURIComponent(e),"&limit=10"));if(t.ok){let e=await t.json();x(e.locations||[])}else x([])}catch(e){console.error("Location search failed:",e),x([])}finally{h(!1)}},w=e=>{d(e.name),j(!1),t(e)},C=c.length>=2?m:f;return(0,a.jsxs)("div",{className:"relative ".concat(o),children:[(0,a.jsxs)("div",{className:"space-y-4",children:[s&&(0,a.jsxs)("button",{onClick:()=>{if(!navigator.geolocation){alert("Geolocation is not supported by this browser.");return}g(!0),navigator.geolocation.getCurrentPosition(async e=>{try{let{latitude:t,longitude:s}=e.coords,a=await fetch("/api/weather/locations/reverse-geocode?lat=".concat(t,"&lon=").concat(s));if(a.ok){let e=await a.json();w(e)}else{let e={name:"Location (".concat(t.toFixed(2),", ").concat(s.toFixed(2),")"),latitude:t,longitude:s,country:"Unknown"};w(e)}}catch(e){console.error("Reverse geocoding failed:",e),alert("Failed to get location name. Please try searching manually.")}finally{g(!1)}},e=>{switch(console.error("Geolocation error:",e),g(!1),e.code){case e.PERMISSION_DENIED:alert("Location access denied. Please enable location services.");break;case e.POSITION_UNAVAILABLE:alert("Location information is unavailable.");break;case e.TIMEOUT:alert("Location request timed out.");break;default:alert("An unknown error occurred while getting location.")}},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})},disabled:p,className:"btn-primary w-full flex items-center justify-center gap-2",children:[p?(0,a.jsx)(l.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(n.Z,{className:"w-4 h-4"}),p?"Getting Location...":"Use Current Location"]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(i.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,a.jsx)("input",{type:"text",value:c,onChange:e=>{let t=e.target.value;d(t),j(!0);let s=setTimeout(()=>{N(t)},300);return()=>clearTimeout(s)},onFocus:()=>j(!0),placeholder:"Search for a city...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),u&&(0,a.jsx)(l.Z,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 animate-spin"})]}),b&&(0,a.jsx)("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:C.length>0?(0,a.jsxs)(a.Fragment,{children:[c.length<2&&(0,a.jsx)("div",{className:"px-4 py-2 text-sm text-gray-500 border-b",children:"Popular Indian Cities"}),C.map((e,t)=>(0,a.jsxs)("button",{onClick:()=>w(e),className:"w-full px-4 py-2 text-left hover:bg-gray-50 focus:bg-gray-50 focus:outline-none",children:[(0,a.jsx)("div",{className:"font-medium",children:e.name}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[e.region&&"".concat(e.region,", "),e.country]})]},t))]}):c.length>=2?(0,a.jsx)("div",{className:"px-4 py-2 text-sm text-gray-500",children:u?"Searching...":"No locations found"}):(0,a.jsx)("div",{className:"px-4 py-2 text-sm text-gray-500",children:"Type to search for locations"})})]})]}),b&&(0,a.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>j(!1)})]})}var c=s(2015),d=s(3423),m=s(9275),x=s(1981),u=s(4280),h=s(5829),p=s(5157),g=s(1397);function b(e){var t,s;let{currentWeather:n,predictions:i,isLoading:o=!1,error:b,onRefresh:j}=e,[f,y]=(0,r.useState)(0);(0,r.useEffect)(()=>{i&&i.length>0&&y(0)},[i]);let v=e=>new Date(e).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),N=e=>e<0?"text-blue-600":e<10?"text-blue-500":e<20?"text-green-500":e<30?"text-yellow-500":e<40?"text-orange-500":"text-red-500";if(b)return(0,a.jsx)("div",{className:"weather-card",children:(0,a.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(x.Z,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Weather Data Unavailable"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:b}),j&&(0,a.jsxs)("button",{onClick:j,className:"btn-primary",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4 mr-2"}),"Try Again"]})]})})});if(o)return(0,a.jsx)("div",{className:"weather-card",children:(0,a.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(l.Z,{className:"w-8 h-8 animate-spin text-primary-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading weather data..."})]})})});if(!n)return(0,a.jsx)("div",{className:"weather-card",children:(0,a.jsxs)("div",{className:"text-center p-8",children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"\uD83C\uDF24ï¸"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Select a location to view weather data"})]})});let w=null==i?void 0:i[f];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"weather-card",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold",children:"Current Weather"}),j&&(0,a.jsx)("button",{onClick:j,className:"p-2 text-gray-500 hover:text-gray-700 rounded-lg hover:bg-gray-100",children:(0,a.jsx)(u.Z,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"text-center md:text-left",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:n.location.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mb-4",children:[n.location.region&&"".concat(n.location.region,", "),n.location.country]}),(0,a.jsxs)("div",{className:"flex items-center justify-center md:justify-start gap-4",children:[(n.current.temperature,t=n.current.humidity,(s=n.current.cloudCover)&&s>80?t>80?(0,a.jsx)(c.Z,{className:"w-8 h-8"}):(0,a.jsx)(d.Z,{className:"w-8 h-8"}):(0,a.jsx)(m.Z,{className:"w-8 h-8"})),(0,a.jsxs)("span",{className:"text-4xl font-bold ".concat(N(n.current.temperature)),children:[Math.round(n.current.temperature),"\xb0C"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(h.Z,{className:"w-5 h-5 text-blue-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Humidity"}),(0,a.jsxs)("p",{className:"font-semibold",children:[Math.round(n.current.humidity),"%"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(p.Z,{className:"w-5 h-5 text-gray-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Pressure"}),(0,a.jsxs)("p",{className:"font-semibold",children:[Math.round(n.current.pressure)," hPa"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(g.Z,{className:"w-5 h-5 text-green-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Wind Speed"}),(0,a.jsxs)("p",{className:"font-semibold",children:[Math.round(3.6*n.current.windSpeed)," km/h"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.Z,{className:"w-5 h-5 text-gray-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Cloud Cover"}),(0,a.jsxs)("p",{className:"font-semibold",children:[Math.round(n.current.cloudCover),"%"]})]})]})]})]}),(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Last updated: ",v(n.lastUpdated)," on ",new Date(n.lastUpdated).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})]})})]}),i&&i.length>0&&(0,a.jsxs)("div",{className:"weather-card",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"24-Hour Forecast"}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)("div",{className:"flex overflow-x-auto pb-2 gap-2",children:i.slice(0,24).map((e,t)=>(0,a.jsxs)("button",{onClick:()=>y(t),className:"flex-shrink-0 px-3 py-2 rounded-lg text-sm font-medium transition-colors ".concat(f===t?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[(0,a.jsx)("div",{children:v(e.timestamp)}),(0,a.jsx)("div",{className:"text-xs opacity-75",children:0===t?"Now":"+".concat(t,"h")})]},t))})}),w&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-medium mb-4",children:["Forecast for ",v(w.timestamp)]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 text-red-500"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Temperature"})]}),(0,a.jsxs)("span",{className:"font-semibold ".concat(N(w.temperature)),children:[Math.round(w.temperature),"\xb0C"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4 text-blue-500"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Humidity"})]}),(0,a.jsxs)("span",{className:"font-semibold",children:[Math.round(w.humidity),"%"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4 text-gray-500"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Pressure"})]}),(0,a.jsxs)("span",{className:"font-semibold",children:[Math.round(w.pressure)," hPa"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(g.Z,{className:"w-4 h-4 text-green-500"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Wind Speed"})]}),(0,a.jsxs)("span",{className:"font-semibold",children:[Math.round(3.6*w.windSpeed)," km/h"]})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Prediction Confidence"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Temperature Range"}),(0,a.jsxs)("span",{className:"font-medium",children:[Math.round(w.uncertainty.lowerBound),"\xb0 - ",Math.round(w.uncertainty.upperBound),"\xb0C"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-primary-600 h-2 rounded-full",style:{width:"".concat(100*w.uncertainty.confidence,"%")}})}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[Math.round(100*w.uncertainty.confidence),"% confidence"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Model Contributions"}),(0,a.jsx)("div",{className:"space-y-1",children:Object.entries(w.modelContributions).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,a.jsx)("span",{className:"capitalize text-gray-600",children:t}),(0,a.jsxs)("span",{className:"font-medium",children:[Math.round(100*s),"%"]})]},t)})})]})]})]})]})]})]})}var j=s(6704),f=s(105);function y(e){let{predictions:t,isLoading:s,data:l,parameter:n,showUncertainty:i=!0,height:o=300,className:c=""}=e,d=(0,r.useRef)(null),m={temperature:{label:"Temperature",unit:"\xb0C",color:"rgb(239, 68, 68)",backgroundColor:"rgba(239, 68, 68, 0.1)",min:void 0,max:void 0},humidity:{label:"Humidity",unit:"%",color:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",min:0,max:100},pressure:{label:"Pressure",unit:"hPa",color:"rgb(107, 114, 128)",backgroundColor:"rgba(107, 114, 128, 0.1)",min:void 0,max:void 0},windSpeed:{label:"Wind Speed",unit:"km/h",color:"rgb(34, 197, 94)",backgroundColor:"rgba(34, 197, 94, 0.1)",min:0,max:void 0},cloudCover:{label:"Cloud Cover",unit:"%",color:"rgb(156, 163, 175)",backgroundColor:"rgba(156, 163, 175, 0.1)",min:0,max:100},precipitation:{label:"Precipitation",unit:"mm",color:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",min:0,max:void 0}}[n||"temperature"],x=(l||[]).map(e=>new Date(e.timestamp).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})),u=(l||[]).map(e=>{switch(n){case"temperature":default:return e.temperature;case"humidity":return e.humidity;case"pressure":return e.pressure;case"windSpeed":return 3.6*e.windSpeed}}),h=i?(l||[]).map(e=>e.uncertainty.lowerBound):[],p=i?(l||[]).map(e=>e.uncertainty.upperBound):[],g=[{label:m.label,data:u,borderColor:m.color,backgroundColor:m.backgroundColor,borderWidth:2,pointRadius:4,pointHoverRadius:6,tension:.4,fill:!1}];i&&h.length>0&&p.length>0&&g.push({label:"Upper Bound",data:p,borderColor:"transparent",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:0,pointRadius:0,pointHoverRadius:0,tension:.4,fill:!1},{label:"Lower Bound",data:h,borderColor:"transparent",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:0,pointRadius:0,pointHoverRadius:0,tension:.4,fill:!1});let b={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:i,position:"top",labels:{filter:e=>"Upper Bound"!==e.text&&"Lower Bound"!==e.text}},title:{display:!0,text:"".concat(m.label," Forecast"),font:{size:16,weight:"bold"}},tooltip:{mode:"index",intersect:!1,callbacks:{label:e=>{let t=e.dataset.label,s=e.parsed.y;return m.label,"".concat(t,": ").concat((null==s?void 0:s.toFixed(1))||"N/A").concat(m.unit)},afterBody:e=>{var t;let s=null===(t=e[0])||void 0===t?void 0:t.dataIndex;if(void 0!==s&&i){let e=h[s],t=p[s];if(void 0!==e&&void 0!==t)return["","Confidence Range:","".concat(e.toFixed(1)).concat(m.unit," - ").concat(t.toFixed(1)).concat(m.unit)]}return[]}}}},scales:{x:{display:!0,title:{display:!0,text:"Time"},grid:{display:!0,color:"rgba(0, 0, 0, 0.1)"}},y:{display:!0,title:{display:!0,text:"".concat(m.label," (").concat(m.unit,")")},min:m.min,max:m.max,grid:{display:!0,color:"rgba(0, 0, 0, 0.1)"}}},interaction:{mode:"nearest",axis:"x",intersect:!1},elements:{point:{hoverBackgroundColor:m.color,hoverBorderColor:"#ffffff",hoverBorderWidth:2}}};return(0,a.jsx)("div",{className:"bg-white rounded-lg p-4 ".concat(c),children:(0,a.jsx)("div",{style:{height:"".concat(o,"px")},children:(0,a.jsx)(f.x1,{ref:d,data:{labels:x,datasets:g},options:b})})})}j.kL.register(j.uw,j.f$,j.od,j.jn,j.Dx,j.u,j.De,j.Gu);var v=s(5790),N=s(4891),w=s(4522),C=s(4056);function k(e){var t;let{modelStatus:s,predictions:l,isLoading:n,modelPerformance:i,modelContributions:o,className:c=""}=e,[d,m]=(0,r.useState)("mae"),x=Object.keys(i||{}),u={lstm:"#ef4444",arima:"#3b82f6",random_forest:"#10b981",fuzzy:"#f59e0b",lube:"#8b5cf6",ensemble:"#6b7280"},h=e=>({lstm:"LSTM",arima:"ARIMA",random_forest:"Random Forest",fuzzy:"Fuzzy Time Series",lube:"LUBE",ensemble:"Ensemble"})[e]||e.toUpperCase(),p=(e,t)=>e<2?{icon:v.Z,color:"text-green-500",label:"Excellent"}:e<5?{icon:N.Z,color:"text-yellow-500",label:"Good"}:{icon:w.Z,color:"text-red-500",label:"Needs Improvement"},g={labels:x.map(h),datasets:[{label:d.toUpperCase(),data:x.map(e=>{var t;return(null==i?void 0:null===(t=i[e])||void 0===t?void 0:t[d])||0}),backgroundColor:x.map(e=>u[e]||"#6b7280"),borderColor:x.map(e=>u[e]||"#6b7280"),borderWidth:1}]},b={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"Model Performance Comparison (".concat(d.toUpperCase(),")"),font:{size:14,weight:"bold"}},tooltip:{callbacks:{label:e=>{let t=e.parsed.y;return"".concat(d.toUpperCase(),": ").concat((null==t?void 0:t.toFixed(3))||"N/A")}}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:d.toUpperCase()}}}},j=o?{labels:Object.keys(o).map(h),datasets:[{data:Object.values(o).map(e=>100*e),backgroundColor:Object.keys(o).map(e=>u[e]||"#6b7280"),borderWidth:2,borderColor:"#ffffff"}]}:null;return(0,a.jsxs)("div",{className:"space-y-6 ".concat(c),children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm border",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Model Performance Metrics"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,a.jsx)("th",{className:"text-left py-2 px-3 font-medium text-gray-900",children:"Model"}),(0,a.jsxs)("th",{className:"text-center py-2 px-3 font-medium text-gray-900",children:["MAE",(0,a.jsx)("div",{className:"text-xs text-gray-500 font-normal",children:"Lower is better"})]}),(0,a.jsxs)("th",{className:"text-center py-2 px-3 font-medium text-gray-900",children:["RMSE",(0,a.jsx)("div",{className:"text-xs text-gray-500 font-normal",children:"Lower is better"})]}),(0,a.jsxs)("th",{className:"text-center py-2 px-3 font-medium text-gray-900",children:["MAPE (%)",(0,a.jsx)("div",{className:"text-xs text-gray-500 font-normal",children:"Lower is better"})]}),(0,a.jsx)("th",{className:"text-center py-2 px-3 font-medium text-gray-900",children:"Status"})]})}),(0,a.jsx)("tbody",{children:x.map(e=>{var t,s,r;let l=null==i?void 0:i[e],n=p((null==l?void 0:l.mae)||0,"mae");return(0,a.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"py-3 px-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:u[e]}}),(0,a.jsx)("span",{className:"font-medium",children:h(e)})]})}),(0,a.jsx)("td",{className:"text-center py-3 px-3 font-mono",children:(null==l?void 0:null===(t=l.mae)||void 0===t?void 0:t.toFixed(3))||"N/A"}),(0,a.jsx)("td",{className:"text-center py-3 px-3 font-mono",children:(null==l?void 0:null===(s=l.rmse)||void 0===s?void 0:s.toFixed(3))||"N/A"}),(0,a.jsxs)("td",{className:"text-center py-3 px-3 font-mono",children:[(null==l?void 0:null===(r=l.mape)||void 0===r?void 0:r.toFixed(2))||"N/A","%"]}),(0,a.jsx)("td",{className:"text-center py-3 px-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,a.jsx)(n.icon,{className:"w-4 h-4 ".concat(n.color)}),(0,a.jsx)("span",{className:"text-xs ".concat(n.color),children:n.label})]})})]},e)})})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm border",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Performance Comparison"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("select",{value:d,onChange:e=>m(e.target.value),className:"px-3 py-1 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"mae",children:"MAE"}),(0,a.jsx)("option",{value:"rmse",children:"RMSE"}),(0,a.jsx)("option",{value:"mape",children:"MAPE"})]}),(0,a.jsxs)("div",{className:"group relative",children:[(0,a.jsx)(C.Z,{className:"w-4 h-4 text-gray-400 cursor-help"}),(0,a.jsx)("div",{className:"absolute right-0 top-6 w-64 p-2 bg-gray-900 text-white text-xs rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity z-10",children:{mae:"Mean Absolute Error - Average prediction error magnitude",rmse:"Root Mean Square Error - Penalizes larger errors more heavily",mape:"Mean Absolute Percentage Error - Error as percentage of actual values"}[d]||""})]})]})]}),(0,a.jsx)("div",{style:{height:"300px"},children:(0,a.jsx)(f.$Q,{data:g,options:b})})]}),j&&(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm border",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Ensemble Model Contributions"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsx)("div",{style:{height:"300px"},children:(0,a.jsx)(f.$I,{data:j,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:20,usePointStyle:!0}},title:{display:!0,text:"Model Contributions to Ensemble",font:{size:14,weight:"bold"}},tooltip:{callbacks:{label:e=>{let t=e.parsed;return"".concat(e.label,": ").concat(t.toFixed(1),"%")}}}}}})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Contribution Details"}),Object.entries(o||{}).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:u[t]}}),(0,a.jsx)("span",{className:"font-medium",children:h(t)})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"font-semibold",children:[(100*s).toFixed(1),"%"]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[s>.3?"High":s>.15?"Medium":"Low"," influence"]})]})]},t)})]})]})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 text-center",children:["Metrics last updated: ",new Date((null===(t=Object.values(i||{})[0])||void 0===t?void 0:t.lastUpdated)||"").toLocaleString()]})]})}j.kL.register(j.uw,j.f$,j.ZL,j.qi,j.Dx,j.u,j.De);var S=s(2894);class E extends r.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t),this.setState({error:e,errorInfo:t})}render(){if(this.state.hasError){let e=this.props.fallback||L;return(0,a.jsx)(e,{error:this.state.error,retry:this.handleRetry})}return this.props.children}constructor(e){super(e),this.handleRetry=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})},this.state={hasError:!1}}}function L(e){let{error:t,retry:s}=e;return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsx)("div",{className:"max-w-md w-full mx-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 text-center",children:[(0,a.jsx)(S.Z,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),(0,a.jsx)("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Something went wrong"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"We encountered an unexpected error. Please try refreshing the page."}),t&&(0,a.jsxs)("details",{className:"mb-6 text-left",children:[(0,a.jsx)("summary",{className:"cursor-pointer text-sm text-gray-500 hover:text-gray-700",children:"Error details"}),(0,a.jsx)("div",{className:"mt-2 p-3 bg-gray-50 rounded text-xs font-mono text-gray-700 overflow-auto",children:t.message})]}),(0,a.jsxs)("button",{onClick:s,className:"btn-primary flex items-center justify-center gap-2 w-full",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4"}),"Try Again"]})]})})})}function M(){let[e,t]=(0,r.useState)(null),{currentWeather:s,predictions:l,modelStatus:n,isLoading:i,error:c,fetchWeatherData:d,fetchPredictions:m,clearError:x}=function(){let[e,t]=(0,r.useState)({currentWeather:null,predictions:null,modelStatus:null,isLoading:!1,error:null}),[s,a]=(0,r.useState)(null),l=(0,r.useCallback)(()=>{t(e=>({...e,error:null}))},[]),n=(0,r.useCallback)(e=>{console.error("Weather API Error:",e);let s="An unexpected error occurred";if(e.response){let t=e.response.status,a=e.response.data;404===t?s="Weather data not available for this location":503===t?s="Weather service is temporarily unavailable":(null==a?void 0:a.detail)&&(s="string"==typeof a.detail?a.detail:a.detail.message||s)}else e.message&&(s=e.message);t(e=>({...e,error:s,isLoading:!1}))},[]),i=(0,r.useCallback)(async e=>{t(e=>({...e,isLoading:!0,error:null}));try{let s=await fetch("/api/weather/current?lat=".concat(e.latitude,"&lon=").concat(e.longitude));if(!s.ok)throw Error("HTTP ".concat(s.status,": ").concat(s.statusText));let r=await s.json();t(e=>({...e,currentWeather:r,isLoading:!1})),a(e)}catch(e){n(e)}},[n]),o=(0,r.useCallback)(async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24;t(e=>({...e,isLoading:!0,error:null}));try{let a=await fetch("/api/predictions/forecast",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({latitude:e.latitude,longitude:e.longitude,hours:s})});if(!a.ok)throw Error("HTTP ".concat(a.status,": ").concat(a.statusText));let r=await a.json();t(e=>({...e,predictions:r,isLoading:!1}))}catch(e){n(e)}},[n]),c=(0,r.useCallback)(async()=>{try{let e=await fetch("/api/predictions/models/status");if(!e.ok)throw Error("HTTP ".concat(e.status,": ").concat(e.statusText));let s=await e.json();t(e=>({...e,modelStatus:s}))}catch(e){console.warn("Failed to fetch model status:",e)}},[]),d=(0,r.useCallback)(async()=>{s&&await Promise.all([i(s),o(s),c()])},[s,i,o,c]);return(0,r.useEffect)(()=>{c();let e=setInterval(c,6e4);return()=>clearInterval(e)},[c]),{...e,fetchWeatherData:i,fetchPredictions:o,fetchModelStatus:c,clearError:l,refreshData:d}}(),u=async e=>{t(e),x();try{await Promise.all([d(e),m(e)])}catch(e){console.error("Failed to fetch weather data:",e)}};return(0,a.jsx)(E,{children:(0,a.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"text-center mb-12",children:[(0,a.jsx)("h1",{className:"text-4xl md:text-6xl font-bold text-gradient mb-4",children:"AI Weather Prediction"}),(0,a.jsx)("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Advanced weather forecasting using multiple AI/ML models with uncertainty quantification"})]}),c&&(0,a.jsxs)("div",{className:"error-message mb-6",children:[(0,a.jsx)("p",{children:c}),(0,a.jsx)("button",{onClick:x,className:"mt-2 text-sm underline hover:no-underline",children:"Dismiss"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",children:[(0,a.jsx)(o,{onLocationSelect:u}),(0,a.jsx)(b,{currentWeather:s,isLoading:i,location:e}),(0,a.jsx)(k,{modelStatus:n,predictions:l,isLoading:i})]}),l&&(0,a.jsx)("div",{className:"space-y-8",children:(0,a.jsx)(y,{predictions:l,isLoading:i})})]})})}}},function(e){e.O(0,[674,980,971,938,744],function(){return e(e.s=9660)}),_N_E=e.O()}]);